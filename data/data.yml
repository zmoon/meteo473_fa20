#
# Data descriptions in YAML format
#
# each file needs:
# - name
# - long_name
# - units (optional?)
#   - in form like W m^-2 (no tex dollar signs, will sub those in later)
# - dims
#
# notes:
# - initial file keys generated by `for f in *.npy; do printf '  %s:\n\n' $f; done`
# - useful reference: https://www2.mmm.ucar.edu/wrf/users/docs/user_guide_V3.8/users_guide_chap5.htm#fields
# - some `long_name`s have tex (`$...$`). could use unicode instead for that?

# alias definitions -- must come first
anchors:
  - &dims_x [lon]
  - &dims_y [lat]
  # - &dims_tyx [time, lat, lon]  # or t, y, x? (dims vs coords)
  # - &dims_tzyx [time, height, lat, lon]  # WRF uses names (Time, bottom_top, south_north, west_east) ?
  # until have date/time info:
  - &dims_tyx [lat, lon]
  - &dims_tzyx [height, lat, lon]

# we have only been given one time (a snapshot from a WRF sim of Typhoon Haiyan)
# from George: "The original WRF output file included the date and time in the file name. It was 2013-11-07 at 7 Z"
time: 2013-11-07 07:00  # assumed UTC with time zone omitted

# grid is 3 km in horizontal dims (approximately?), 500 m in vertical (index 0 is the surface)

files:
  HFX.npy:
    name: hfx
    long_name: Upward sensible heat flux at the surface
    units: W m^-2
    dims: *dims_tyx

  LANDMASK.npy:
    name: landmask
    long_name: Land mask (1 for land, 0 for water)
    units: ''
    dims: *dims_tyx

  LH.npy:
    name: lh
    long_name: Latent heat flux at the surface
    units: W m^-2
    dims: *dims_tyx

  OLR.npy:
    name: olr
    long_name: Outgoing longwave radiation at the ToA
    units: W m^-2
    dims: *dims_tyx

  PBLH.npy:
    name: pblh
    long_name: PBL height
    units: m
    dims: *dims_tyx

  PSFC.npy:
    name: psfc
    long_name: (Atmospheric) surface pressure
    units: Pa
    dims: *dims_tyx

  QRAINcmp.npy:
    name: qrain_cmp
    # this is the max value at any level,
    # similar to composite radar reflectivity
    long_name: Composite rain water mixing ratio
    units: kg kg^-1  # (kg rain water) (kg air)^-1
    dims: *dims_tyx

  QRAINsfc.npy:
    name: qrain_sfc
    long_name: Rain water mixing ratio at the surface
    units: kg kg^-1
    dims: *dims_tyx  # original WRF variable QRAIN is tzyx

  RAINNC.npy:
    name: rainnc
    long_name: Accumulated total precip.  # ?? accumulated (over what?) total in grid cell
    units: mm
    dims: *dims_tyx

  SST.npy:
    name: sst
    long_name: Sea surface temperature
    units: K
    dims: *dims_tyx

  XLAT.npy:
    name: lat
    long_name: Latitude
    units: degN
    dims: *dims_y

  XLONG.npy:
    name: lon
    long_name: Longitude
    units: degE
    dims: *dims_x

  # the following variables were originally on model levels (eta levels)
  # but Dr. Young interpolated them to a grid with constant dz = 500 m

  qCloudInterp.npy:
    name: qcloud
    long_name: Cloud water mixing ratio
    units: kg kg^-1
    dims: *dims_tzyx

  qRainInterp.npy:
    name: qrain
    long_name: Rain water mixing ratio
    units: kg kg^-1
    dims: *dims_tzyx

  qVaporInterp.npy:
    name: qvapor
    long_name: Water vapor mixing ratio
    units: kg kg^-1
    dims: *dims_tzyx

  tInterp.npy:
    name: theta
    long_name: Potential temperature $\theta$
    # in WRF output t is perturbation potential temperature (theta-t0)
    # Dr. Young seems to have added t0 (the base state potential temperature) back in
    units: K
    dims: *dims_tzyx

  uInterp.npy:
    name: u
    long_name: $u$ (x-wind)
    units: m s^-1
    dims: *dims_tzyx

  vInterp.npy:
    name: v
    long_name: $v$ (y-wind)
    units: m s^-1
    dims: *dims_tzyx

  wInterp.npy:
    name: w
    long_name: $w$ (z-wind)
    units: m s^-1
    dims: *dims_tzyx
